# Redis
## 1. Redis 数据结构
Redis支持五种数据结构：字符串（strings）、哈希（hashes）、列表（lists）、集合（sets）和有序集合（sorted sets）。
## 2. Redis 分布式锁
Redis分布式锁的实现方式有多种，其中一种常见的方式是使用Redis的SETNX命令和EXPIRE命令。SETNX命令用于设置一个键的值，如果键不存在则设置成功并返回1，否则返回0。EXPIRE命令用于设置键的过期时间。通过将键的值设置为一个唯一的标识符，并在获取锁时使用SETNX命令，如果设置成功则表示获取到了锁，然后使用EXPIRE命令为键设置一个过期时间，防止锁忘记释放。在释放锁时，只需要将键的值设置为空，并删除过期时间即可。
## 3. Redis 持久化
Redis支持两种持久化方式：RDB（Redis Database）和AOF（Append Only File）。
RDB做镜像全量持久化，AOF做增量持久化。因为RDB会耗费较长时间，不够实时，在停机的时候会导致大量丢失数据，所以需要AOF来配合使用。在redis实例重启时，会使用RDB持久化文件重新构建内存，再使用AOF重放近期的操作指令来实现完整恢复重启之前的状态。

**这里很好理解，把RDB理解为一整个表全量的数据，AOF理解为每次操作的日志就好了，服务器重启的时候先把表的数据全部搞进去，但是他可能不完整，你再回放一下日志，数据不就完整了嘛。不过Redis本身的机制是 AOF持久化开启且存在AOF文件时，优先加载AOF文件；AOF关闭或者AOF文件不存在时，加载RDB文件；加载AOF/RDB文件城后，Redis启动成功； AOF/RDB文件存在错误时，Redis启动失败并打印错误信息。**
## 4. Redis 事务
Redis事务可以一次执行多个命令，并且带有以下三个重要的保证：

## 5. Redis 集群

## 6.MySQL和Redis读写一致性

MySQL和Redis的读写一致性是一个重要的问题，尤其是在处理分布式系统时。以下是一些关于如何处理MySQL和Redis之间读写一致性的策略：

- 使用分布式锁：在更新数据时，可以使用分布式锁来确保同时只有一个节点进行写操作。这样可以保证数据的一致性，但可能会降低系统的并发性能。
- 先更新数据库，再删除缓存：这种策略可以保证数据的一致性，但可能会在高并发的情况下导致缓存的脏数据。
- 先删除缓存，再更新数据库：这种策略可能会在高并发的情况下导致数据的不一致，但可以减少缓存的脏数据。
- 读写并发时的处理：对于读请求，可以从缓存中读取数据，如果缓存中没有数据，则从数据库中读取数据并更新缓存。对于写请求，可以先获取分布式锁，更新数据库和缓存，然后释放锁。这样可以保证数据的一致性，但可能会降低系统的并发性能。
- 使用消息队列：可以使用消息队列来异步地更新数据库和缓存。这样可以提高系统的并发性能，但需要处理消息的顺序和一致性问题。

## 7. Redis哨兵、持久化、主从、LRU
Redis的哨兵模式、持久化、主从复制和LRU缓存策略都是其高可用性和数据持久性的重要组成部分。

哨兵模式（Sentinel）：

哨兵模式是Redis的高可用性解决方案。它提供了一种自动故障转移机制，当主节点不可用时，能够自动将一个从节点升级为新的主节点，并且客户端会自动切换到新的主节点。
哨兵模式通过监控Redis节点的状态来实现故障转移。当主节点出现故障时，哨兵会检测到这个状态变化，并触发自动故障转移。
持久化（Persistence）：

持久化是Redis确保数据安全性的重要机制。通过持久化，Redis可以将内存中的数据定期写入磁盘，以实现数据的持久化和数据的可靠保存。
两种持久化方式：RDB（Redis DataBase）持久化和AOF（Append Only File）持久化。RDB持久化是通过生成数据快照的方式实现的，它将Redis某一时刻的数据写入一个二进制文件。AOF持久化则是记录Redis的所有写操作命令到一个追加日志文件中，当Redis重启时，会通过回放这些写操作命令来重建数据集。
主从复制（Replication）：

主从复制是Redis实现读写分离和数据备份的常用策略。一个主节点可以配置多个从节点，所有的写操作都在主节点上执行，读操作可以在从节点上执行，从而分担主节点的压力。
当主节点有数据更新时，会自动同步到从节点，保证主从节点数据的一致性。如果主节点出现故障，可以迅速切换到从节点，保证服务的可用性。
LRU（Least Recently Used）缓存策略：

LRU是一种常见的缓存淘汰策略，当缓存达到最大容量时，会优先淘汰最近最少使用的数据。
在Redis中，可以通过配置LRU相关的参数来控制LRU的行为，例如最大容量、淘汰策略等。通过合理的配置LRU策略，可以有效地控制Redis的内存使用，提高系统的性能和可用性。